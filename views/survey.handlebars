<div class="container">
    <h1>Survey Questions</h1>
    <hr>
    <h2>About You</h2>
    <label>Name (Required)</label>
    <input type="text" class="form-control" id="name" required>
    <label>Link to photo image (Required)</label>
    <input type="text" class="form-control" id="photo" required>
    <hr>
    <h2>Question 1</h2>
    <h4> Do you have a shelter in place plan?</h4>
    <select class="custom-select" id="q1" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <h2>Question 2</h2>
    <h4>Do you have an evacuation plan?</h4>
    <select class="custom-select" id="q2" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <h2>Question 3</h2>
    <h4>Do you have a vehicle or a way to get out of the area?</h4>
    <select class="custom-select" id="q3" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <h2>Question 4</h2>
    <h4>Do you have access to emergency funds in the form of cash?</h4>
    <select class="custom-select" id="q4" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <h2>Question 5</h2>
    <h4>Do you have food/rations available and ready?</h4>
    <select class="custom-select" id="q5" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <h2>Question 6</h2>
    <h4> Do you have medication/OTC pharmaceuticals on hand?</h4>
    <select class="custom-select" id="q6" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <h2>Question 7</h2>
    <h4> Do you have hand sanitizer?</h4>
    <select class="custom-select" id="q7" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <h2>Question 8</h2>
    <h4>Do you have toiletries?</h4>
    <select class="custom-select" id="q8" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <h2>Question 9</h2>
    <h4>Do you have available facemasks/eye protection?</h4>
    <select class="custom-select" id="q9" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <h2>Question 10</h2>
    <h4>Do you have clean and portable water?</h4>
    <select class="custom-select" id="q10" required>
        <option value="">Select an Option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
    </select>
    <br>
    <br>
    <button class="btn btn-primary" id="submit" type="submit">Submit</button>
    <br>
    <br>
    <footer><a href="/">‚Üê Back To Home</a>
    </footer>
</div>


<div id="modal-results" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Pandemic Score</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="margin: 0 auto;">
                <h5 id="pandemic-score" style="text-align: center;"></h5>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script>
    $("#submit").on("click", function (event) {
        event.preventDefault();


        function validateUser() {
            var isValid = true;
            $(".form-control").each(function () {
                if ($(this).val() === "") {
                    isValid = false;
                }
            });

            $(".custom-select").each(function () {
                if ($(this).val() === "") {
                    isValid = false;
                }
            });
            return isValid
        }
        if (validateUser()) {
            var dataUser = {
                name: $("#name").val(),
                scores: [
                    $("#q1").val(),
                    $("#q2").val(),
                    $("#q3").val(),
                    $("#q4").val(),
                    $("#q5").val(),
                    $("#q6").val(),
                    $("#q7").val(),
                    $("#q8").val(),
                    $("#q9").val(),
                    $("#q10").val()
                ]
            };
            console.log(dataUser)

            $.post("/api/profile", dataUser, function (data) {

                // if a survey has data show matched modal

                $("#pandemic-score").text(data.name)
                $("#modal-results").modal("toggle")
            });
        } else {
            alert("Please fill out survey")
        }
    });

</script>